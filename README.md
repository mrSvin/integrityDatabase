## Реализация целостности БД с помощью распределенной декомпозиции хэша

### Проблема, которую решает сервис
Если злоумышленник получил доступ к одной из двух нод и собственноручно изменит в ней данные, то сервис при проведении операции относительно определенного id проверит на валидность текущих полей по распределенному хэшу 2 нодах. Фактически сервис не позволит осуществить операцию при нарушенной целостности одного из полей к запрашиваемому id.

### Структура системы
2 ноды, в которых имеются изолированные БД.

Первая нода с БД с полями:
- id кошелька, баланс
- время последней операции
- hash (начальный хэш)

Вторая БД с полями:
- id кошелька
- hash (конечный хэш)

### Работа сервиса по обеспечению целостности
1.Сервис имеет четыре grpc эндпоинта:
- создание кошелька (создается только с нулевым балансом)
- удаление кошелька
- изменение баланса кошельков
- чтение баланса кошелька
2. При вызове эндпоинта на изменеие балансов, удаление кошелька, чтение баланса происходит такой алгоритм проверки целостности относительно определенного кошелька:
   1. В текущей ноде происходит чтение БД полей id, баланса, времени последней операции, к ним применяется расчет хэша
   2. Полученное значение считывается и сравнивается с конкатенируемым значением hex БД первой ноды и второй ноды по id, если не совпало, то реверт


### Возможные проблемы
#### 1. Отказоустойчивость, при отключении одной из нод.
#### Возможное решение:
Вести синхронной репликацию БД двух нод в две другие. Если основной контур нод падает, сервис переходит на взаимодействие с репликами.

#### 2. Восстановление данных при нарушении целостности.
#### Возможное решение:
Ведение в отдельной БД лога каждого изменения с фиксацией начального хэша, что позволит по id кошелька по внешнему хэшу (конечный хэш в отдельной ноде) восстановить последнюю запись с корректной валидацией (с некорректными данными в логах это будет сделать невозможно, что исключит риск подделки логов).
